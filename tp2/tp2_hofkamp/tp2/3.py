import numpy as np
import matplotlib.pyplot as plt 

prob_forward =np.array( [[0.25,0.5,0.25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
          [0,0.25,0.5,0.25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
          [0,0,0.25,0.5,0.25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
          [0,0,0,0.25,0.5,0.25,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
          [0,0,0,0,0.25,0.5,0.25,0,0,0,0,0,0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0.25,0.5,0.25,0,0,0,0,0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0.25,0.5,0.25,0,0,0,0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0.25,0.5,0.25,0,0,0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0,0.25,0.5,0.25,0,0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0.25,0.5,0.25,0,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0.25,0.5,0.25,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0.25,0.5,0.25,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0.25,0.5,0.25,0,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0.25,0.5,0.25,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.25,0.5,0.25,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.25,0.5,0.25,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.25,0.5,0.25,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.25,0.5,0.25],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.25,0.75],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]
        ]).T

prob_backward = np.flip(np.flip(prob_forward, axis=1), axis=0)


belief = np.hstack((np.zeros(10), 1, np.zeros(9)))

#avanza 9 veces
for _ in range(9):
    belief = np.dot(prob_forward, belief)

# retrocede 3 veces
for _ in range(3):
    belief = np.dot(prob_backward, belief)
pos_final = np.argmax(belief)
print(f"Posición final del robot: {pos_final}")


plt.figure(figsize=(10, 4))
plt.bar(range(20), belief, color='blue', alpha=0.7)
plt.xlabel("Posición")
plt.ylabel("Probabilidad")
plt.title("Distribución final del belief del robot")
plt.show()